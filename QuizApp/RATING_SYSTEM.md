# 레이팅 시스템 설명

## 개요
이 앱은 ELO 레이팅 시스템을 사용하여 사용자들의 실력을 평가하고 매칭합니다.

## 레이팅 초기값
- **신규 가입자**: 모든 신규 가입자는 **1000점**으로 시작합니다.
- **기본값**: 레이팅 정보가 없는 경우 자동으로 1000점으로 설정됩니다.

## 매칭 시스템
- **매칭 범위**: 레이팅 **±50점** 범위 내의 사용자와 매칭됩니다.
  - 예: 내 레이팅이 1000점이면, 950점~1050점 사이의 사용자와 매칭 가능
- **매칭 우선순위**: 가장 가까운 레이팅을 가진 사용자와 우선 매칭됩니다.

## ELO 레이팅 계산 방식

### 기본 공식
```
예상 승률 = 1 / (1 + 10^((상대방 레이팅 - 내 레이팅) / 400))
레이팅 변화 = K값 × (실제 결과 - 예상 승률)
새 레이팅 = 현재 레이팅 + 레이팅 변화
```

### K값 (가중치)
- **기본값**: 32
- K값이 클수록 레이팅 변화가 큽니다.

### 예시
1. **내 레이팅: 1000점, 상대방 레이팅: 1050점**
   - 예상 승률: 약 43.7%
   - 승리 시: +18점 (1018점)
   - 패배 시: -14점 (986점)

2. **내 레이팅: 1000점, 상대방 레이팅: 950점**
   - 예상 승률: 약 56.3%
   - 승리 시: +14점 (1014점)
   - 패배 시: -18점 (982점)

3. **내 레이팅: 1000점, 상대방 레이팅: 1000점**
   - 예상 승률: 50%
   - 승리 시: +16점 (1016점)
   - 패배 시: -16점 (984점)

## 레이팅 업데이트 시점
- 게임 종료 시 자동으로 레이팅이 업데이트됩니다.
- 승리/패배 여부에 따라 레이팅이 증가/감소합니다.
- 레이팅은 0점 이하로 내려가지 않습니다.

## 주요 함수

### `getUserRating()`
- 현재 사용자의 레이팅을 가져옵니다.
- 레이팅이 없으면 기본값 1000을 반환합니다.

### `updateUserRating(userId, newRating)`
- 사용자의 레이팅을 업데이트합니다.
- 게임 종료 후 자동으로 호출됩니다.

### `calculateEloRating(playerRating, opponentRating, isWin, kFactor)`
- ELO 레이팅 계산 함수입니다.
- 승리/패배 여부에 따라 새로운 레이팅을 계산합니다.

## 서버 측 매칭 로직
- 서버는 매칭 큐를 관리합니다.
- 레이팅 ±50점 범위 내의 사용자를 찾아 매칭합니다.
- 매칭이 성공하면 두 사용자에게 동일한 문제 10개를 제공합니다.

## 데이터베이스
- `users` 테이블의 `rating` 컬럼에 저장됩니다.
- 기본값: 1000
- 타입: INTEGER

